<html>
<head>
<title>Aspire task manager developers documentation</title>
<style>
body {
	padding: 0;
	background-color: #404040;
}
.wrap {
	background-color: #AAFFAA;
	width: 662px;
	margin: auto;
}
.body {
	padding: 0;
	margin: auto;
	width: 640px;
	border-left: 1px solid #004000;
	border-right: 1px solid #004000;
}
.menu {
	margin: 0;
	padding: 0;
	height: 33px;
	line-height: 32px;
	font-size: 24px;
	border-bottom: 1px solid #004000;
}
.menuitem-active, .menuitem {
	display: block;
	float: left;
	width: 128px;
	height: 32px;
	text-decoration: none;
	text-align: center;
}
.menuitem-active {
	color: #400000;
	border-right: 1px solid #400000;
}
.menuitem, .menuitem:visited {
	color: #004000;
	border-right: 1px solid #004000;
}
.menuitem:hover {
	color: #800000;
	border-right: 1px solid #800000;
}
.content {
	padding: 10px;
	font-size: 14px;
}
</style>
</head>
<body>
<div class="wrap"><div class="body">

<div class="menu">
	<a class="menuitem" href="index.html">Home</a>
	<a class="menuitem" href="spa.html">SPA</a>
	<a class="menuitem" href="routes.html">Routes</a>
	<div class="menuitem-active" href="api.html">REST API</div>
</div>
<div class="content">
<h4><center>REST API documentation</center></h4>
<p>To use REST API we need token. It is hash generated on server side after login and password are sent. To get token we need authorization, send login and password. Some REST API functinos return <u>status</u> code in response body and it's always same as error code returned by server.</p>
<h5>Authorization</h5>
<h6>Request:</h6>
<pre>POST /api_v1.0/auth
{
  login: string,
  password: string
}
</pre>
<h6>Response:</h6>
<p>If authorization is succesful:</p>
<pre>
{
  status: 200,
  idUser: string,
  token: string
}
</pre>
<p>If authorization is failed:</p>
<pre>
{
  status: 403
}
</pre>
<p>If bad input data format:</p>
<pre>
{
  status: 400
}
</pre>
<h5>Closing session</h5>
<h6>Request:</h6>
<pre>GET /api_v1.0/logout</pre>
<h6>Response:</h6>
<pre>
{
  status: 200
}
</pre>
<h5>Listing tasks</h5>
<h6>Request:</h6>
<pre>GET /api_v1.0/[token]/tasks</pre>
<h6>Response:</h6>
<pre>
{
  status: 200,
  totalTasks: number,
  tasksSent: number,
  tasks: [
    {
      idTask: string,
      name: string,
      doer: string,
      priority: enum(High, Medium, Low),
      deadline: string
    },
    ...
  ]
}
</pre>
If token is wrong:
<pre>
{
  status: 403
}
</pre>
<h5>Listing tasks with paging</h5>
<h6>Request:</h6>
<pre>GET /api_v1.0/[token]/tasks/:pageSize/:pageNumber</pre>
<h6>Response:</h6>
<p>Server answer is very same as in previous API function, 'Listing tasks'</p>
<h5>Get task details</h5>
<h6>Request:</h6>
<pre>GET /api_v1.0/[token]/task/:id</pre>
<h6>Response:</h6>
<p>If user has rights to this task and task with given <u>idTask</u> exists:</p>
<pre>
{
  status: 200,
  task: {
    name: string,
    idDoer: string,
    doer: string,
    idManager: string,
    manager: string,
    priority: enum(High, Medium, Low),
    deadline: string,
    descr: text,
    attachList: [
      {
        idAttach: string,
        filename: string,
        url: string,
        size: string
      },
      ...
    ]
  }
}
</pre>
<p>If user has no rights to access this task or task with given <u>idTask</u> is not exists:</p>
<pre>
{
  status: 404
}
</pre>
<h5>Create new task</h5>
<h6>Request:</h6>
<pre>POST /api_v1.0/[token]/newtask
{
  name: string,
  idDoer: string,
  priority: enum(High, Medium, Low),
  deadline: string,
  descr: text,
  attachList: [
    {
      idAttach: string,
      filename: string,
      url: string,
      size: string
    },
    ...
  ]
}
</pre>
<h6>Response:</h6>
<p>If everything's fine:</p>
<pre>
{
  status: 200,
  idTask: string
}
</pre>
<p>If user cannon assign task to given doer:</p>
<pre>
{
  status: 403,
}
</pre>
<p>If there error in JSON input format:</p>
<pre>
{
  status: 400
}
</pre>
<h5>Change task</h5>
<h6>Request:</h6>
<pre>PUT /api_v1.0/[token]/task/:id
{
  name: string,
  idDoer: string,
  priority: enum(High, Medium, Low),
  deadline: string,
  descr: text,
  attachList: [
    {
      idAttach: string,
      filename: string,
      url: string,
      size: string
    },
    ...
  ]
}
</pre>
<h6>Response:</h6>
<p>If task is updated:</p>
<pre>
{
  status: 200,
}
</pre>
<p>If user cannon assign task to given doer:</p>
<pre>
{ 
  status: 403,
}
</pre>
<p>If there error in JSON input format:</p>
<pre>
{
  status: 400
}
</pre>
<h5>Delete task</h5>
<h6>Request:</h6>
<pre>DELETE /api_v1.0/[token]/task/:id</pre>
<h6>Response:</h6>
<p>If user is task creator and given <u>idTask</u> is exists:</p>
<pre>
{ 
  status: 200,
}
</pre>
<p>Otherwise:</p>
<pre>
{
  status: 403,
}
</pre>
<h5>Delete attach from task</h5>
<h6>Request:</h6>
<pre>DELETE /api_v1.0/[token]/attach/:idTask/:idAttach</pre>
<h6>Response:</h6>
<p>If user is task creator, <u>idTask</u> exists and has attach with id <u>idAttach</u>:</p>
<pre>
{
  status: 200
}
</pre>
<p>If user is not task creator:</p>
<pre>
{
  status: 403
}
</pre>
<p>If there is no attach with id <u>idAttach</u> in task with id <u>idTask</u>:</p>
<pre>
{
  status: 404
}
</pre>
<h5>List users</h5>
<h6>Request:</h6>
<pre>GET /api_v1.0/[token]/users</pre>
<h6>Response:</h6>
<p>If user has 'Admin' role:</p>
<pre>
{
  status: 200,
  users: [
    {
      idUser: string,
      firstName: string,
      lastName: string,
      eMail: string,
      manager: string,
      role: string
    },
    ...
  ]
}
</pre>
<p>If user has no 'Admin' role:</p>
<pre>
{
  status: 403
}
</pre>
<h5>List accessible doers</h5>
List of users managed by user logged in.
<h6>Request:</h6>
<pre>GET /api_v1.0/[token]/doers</pre>
<h6>Response:</h6>
<pre>
{
  status: 200,
  users: [
    {
      idUser: string,
      firstName: string,
      lastName: string
    },
    ...
  ]
}
</pre>
<p>Returned array may be empty.</p>
<h5>Add user</h5>
<h6>Request:</h6>
<pre>POST /api_v1.0/[token]/newuser
{
  firstName: string,
  lastName: string,
  eMail: string,
  manager: string,
  role: string,
  password: string
}
</pre>
<h6>Response:</h6>
<p>If user has 'Admin' role:</p>
<pre>
{
  status: 200,
  idUser: string
}
</pre>
<p>Otherwise:</p>
<pre>
{
  status: 403
}
</pre>
<h5>Alter user</h5>
<h6>Request:</h6>
<pre>PUT /api_v1.0/[token]/user/:id
{
  firstName: string,
  lastName: string,
  eMail: string,
  manager: string,
  role: string,
  password: string
}
</pre>
<h6>Response:</h6>
<p>If user has 'Admin' role:</p>
<pre>
{
  status: 200,
}
</pre>
<p>Otherwise:</p>
<pre>
{
  status: 403
}
</pre>
</div>

</div></div>
</body>
</html>
